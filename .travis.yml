# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

language: R
cache: packages

install:
- R -e 'install.packages("remotes")'
- R -e 'remotes::install_deps(dep = T)'
- R -e 'remotes::install_local()'
- Rscript install.R

script:
- Rscript -e 'testthat::test_dir("tests/testthat/", reporter = c("progress", "fail"))'

after_failure:
- Rscript py_install_test.R

env:
  - INSTALL_METHOD="conda" TENSORFLOW_VERSION="default"
  - INSTALL_METHOD="conda" TENSORFLOW_VERSION="nightly"
  - INSTALL_METHOD="conda" TENSORFLOW_VERSION="2.0.0-b0"
  - INSTALL_METHOD="virtualenv" TENSORFLOW_VERSION="default"
  - INSTALL_METHOD="virtualenv" TENSORFLOW_VERSION="nightly"
  - INSTALL_METHOD="virtualenv" TENSORFLOW_VERSION="2.0.0-b0"

os:
  - linux
  - osx

dist: xenial
